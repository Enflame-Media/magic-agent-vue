# Happy Vue Web Application - Cloudflare Workers Configuration
#
# This deploys the Vue.js SPA to Cloudflare Workers using static assets.
# The [assets] section enables SPA routing where unmatched routes
# serve index.html for client-side routing to handle.

name = "happy-vue-web"
compatibility_date = "2026-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "81f483e6767ea3194467ecef42840f79"

# Static assets configuration for SPA
# Vite builds to ./dist by default
[assets]
directory = "./dist"
not_found_handling = "single-page-application"

#############################
# Development Environment
#############################
[env.development]
name = "happy-vue-web-dev"
preview_urls = false
workers_dev = false

[[env.development.routes]]
pattern = "happy-vue-dev.enflamemedia.com"
custom_domain = true

[env.development.observability]
[env.development.observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true

[env.development.vars]
ENVIRONMENT = "development"
BASE_URL = "https://happy-vue-dev.enflamemedia.com"
API_BASE_URL = "https://happy-api-dev.enflamemedia.com"

#############################
# Production Environment
#############################
[env.production]
name = "happy-vue-web"
preview_urls = false
workers_dev = false

[[env.production.routes]]
pattern = "happy-vue.enflamemedia.com"
custom_domain = true

[env.production.observability]
[env.production.observability.logs]
enabled = true
head_sampling_rate = 0.1
invocation_logs = true

[env.production.vars]
ENVIRONMENT = "production"
BASE_URL = "https://happy-vue.enflamemedia.com"
API_BASE_URL = "https://happy-api.enflamemedia.com"